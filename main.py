import telebot
from telebot import types
import logging
import threading
import time
from datetime import datetime, timedelta

logging.basicConfig(level=logging.INFO)


API_TOKEN = '7880925636:AAEBv-iQKTL6rgGq6Y3PDCtMm38FsMqX194'
bot = telebot.TeleBot(API_TOKEN)

users_data = {}


def main_menu_keyboard():
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    keyboard.add("ğŸ’¸Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´", "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹")
    keyboard.add("ğŸ“ˆĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ²", "ğŸ’°Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚")
    keyboard.add("ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚", "ğŸ’¡Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ³Ñ€Ğ°Ğ¼Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸")
    keyboard.add("â°Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ", "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ")
    return keyboard

def reminder_checker():
    while True:
        current_time = datetime.now()
        for user_id, data in users_data.items():
            reminders = data.get('reminders', [])
            for reminder in reminders:
                if reminder['time'] <= current_time:
                    bot.send_message(user_id, f"ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ: {reminder['message']} Ğ½Ğ° ÑÑƒĞ¼Ğ¼Ñƒ {reminder['amount']}")
                    reminders.remove(reminder)  # Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸
        time.sleep(60)  # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞºĞ°Ğ¶Ğ´ÑƒÑ Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ

# Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ¿Ğ¾Ñ‚Ğ¾Ğº Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹
threading.Thread(target=reminder_checker, daemon=True).start()




@bot.message_handler(commands=['start'])
def start(message):
    user_id = message.from_user.id
    users_data.setdefault(user_id, {'expenses': [], 'budget': 0})
    bot.send_message(message.chat.id, f"ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, {message.from_user.first_name}! Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ±Ğ¾Ñ‚! Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())

@bot.message_handler(func=lambda message: message.text in ["ğŸ’¸Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´", "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹", "ğŸ“ˆĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ²",
 "ğŸ’°Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚", "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚", "ğŸ’¡Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ³Ñ€Ğ°Ğ¼Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸","â°Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ",
 "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ"])
def main_menu(message):
    user_id = message.from_user.id
    
    if message.text == "ğŸ’¸Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´":
        bot.send_message(message.chat.id, "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ÑÑƒĞ¼Ğ¼Ñƒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ°:")
        bot.register_next_step_handler(message, add_expense)

    elif message.text == "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹":
        view_expenses(message)

    elif message.text == "ğŸ“ˆĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ²":
        analyze_expenses(message)

    elif message.text == "ğŸ’°Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚":
        bot.send_message(message.chat.id, "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ Ğ±ÑĞ´Ğ¶ĞµÑ‚:")
        bot.register_next_step_handler(message, set_budget)

    elif message.text == "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚":
        budget = users_data[user_id]['budget']
        bot.send_message(message.chat.id, f"Ğ’Ğ°Ñˆ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚: {budget}")

    elif message.text == "ğŸ’¡Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ³Ñ€Ğ°Ğ¼Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸":
        financial_tips(message)

    elif message.text == "â°Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ":
        bot.send_message(message.chat.id, "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ÑÑƒĞ¼Ğ¼Ñƒ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°:")
        bot.register_next_step_handler(message, set_reminder_amount)

    elif message.text == "ğŸ‘€ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ":
        view_reminders(message)


    elif message.text == "âŒĞ’Ñ‹Ñ…Ğ¾Ğ´":
        bot.send_message(message.chat.id, "Ğ’Ñ‹ Ğ²Ñ‹ÑˆĞ»Ğ¸ Ğ¸Ğ· Ğ±Ğ¾Ñ‚Ğ°. Ğ”Ğ¾ ÑĞ²Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ!")





def add_expense(message):
    user_id = message.from_user.id
    try:
        amount = float(message.text)
        users_data[user_id]['expenses'].append(amount)
        bot.send_message(message.chat.id, f"Ğ Ğ°ÑÑ…Ğ¾Ğ´ {amount} Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½.")
        bot.send_message(message.chat.id, "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())

    except ValueError:
        bot.send_message(message.chat.id, "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½ÑƒÑ ÑÑƒĞ¼Ğ¼Ñƒ.")
        bot.register_next_step_handler(message, add_expense)


def view_expenses(message):
    user_id = message.from_user.id
    expenses = users_data[user_id]['expenses']
    
    if expenses:
        response = "\n".join(f"Ğ Ğ°ÑÑ…Ğ¾Ğ´: {exp}" for exp in expenses)
        bot.send_message(message.chat.id, f"Ğ’Ğ°ÑˆĞ¸ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹:\n{response}")
    else:
        bot.send_message(message.chat.id, "Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ².")
    
    bot.send_message(message.chat.id, "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())

def analyze_expenses(message):
    user_id = message.from_user.id
    expenses = users_data[user_id]['expenses']
    
    if expenses:
        total_expenses = sum(expenses)
        average_expense = total_expenses / len(expenses)
        max_expense = max(expenses)
        min_expense = min(expenses)
        
        analysis_msg = (
            f"ĞĞ±Ñ‰Ğ¸Ğµ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹: {total_expenses}\n"
            f"Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ€Ğ°ÑÑ…Ğ¾Ğ´: {average_expense}\n"
            f"ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ…Ğ¾Ğ´: {max_expense}\n"
            f"ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ…Ğ¾Ğ´: {min_expense}"
        )
        
        bot.send_message(message.chat.id, analysis_msg)
    else:
        bot.send_message(message.chat.id, "Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ² Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°.")
    
    bot.send_message(message.chat.id, "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())


def set_budget(message):
    user_id = message.from_user.id
    try:
        budget = float(message.text)
        users_data[user_id]['budget'] = budget
        bot.send_message(message.chat.id, f"Ğ’Ğ°Ñˆ Ğ±ÑĞ´Ğ¶ĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ½Ğ° ÑÑƒĞ¼Ğ¼Ñƒ: {budget}")
        bot.send_message(message.chat.id, "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())
    except ValueError:
        bot.send_message(message.chat.id, "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½ÑƒÑ ÑÑƒĞ¼Ğ¼Ñƒ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°.")
        bot.register_next_step_handler(message, set_budget)


def financial_tips(message):
    tips = [
        "1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ¸ Ğ¿Ñ€Ğ¸Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°Ğ¹Ñ‚ĞµÑÑŒ ĞµĞ³Ğ¾.",
        "2. Ğ¡Ñ‚Ğ°Ñ€Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ğ¾Ñ‚ĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ñ‡Ğ°ÑÑ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ° Ğ½Ğ° ÑĞ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ¸Ñ.",
        "3. Ğ˜Ğ·Ğ±ĞµĞ³Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ¼Ğ¿ÑƒĞ»ÑŒÑĞ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº.",
        "4. Ğ˜Ğ·ÑƒÑ‡Ğ°Ğ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¸ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ¸ Ğ¸Ñ‰Ğ¸Ñ‚Ğµ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¸Ñ… ÑĞ¾ĞºÑ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ.",
        "5. Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ² ÑĞ²Ğ¾Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸."
    ]
    
    tips_msg = "\n".join(tips)
    bot.send_message(message.chat.id, f"Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ³Ñ€Ğ°Ğ¼Ğ¾Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸:\n{tips_msg}")
    
    bot.send_message(message.chat.id, "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())


def set_reminder_amount(message):
    user_id = message.from_user.id
    try:
        amount = float(message.text)
        users_data[user_id].setdefault('reminders', [])
        
        bot.send_message(message.chat.id, "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ:")
        bot.register_next_step_handler(message, lambda msg: set_reminder_time(msg, amount))
    except ValueError:
        bot.send_message(message.chat.id, "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½ÑƒÑ ÑÑƒĞ¼Ğ¼Ñƒ.")
        bot.register_next_step_handler(message, set_reminder_amount)

def set_reminder_time(message, amount):
    user_id = message.from_user.id
    reminder_message = message.text

    bot.send_message(message.chat.id, "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ´Ğ»Ñ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ Ğ“Ğ“Ğ“Ğ“-ĞœĞœ-Ğ”Ğ” Ğ§Ğ§:ĞœĞœ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, 2023-10-30 15:30):")
    bot.register_next_step_handler(message, lambda msg: add_reminder(msg, amount, reminder_message))

def add_reminder(message, amount, reminder_message):
    user_id = message.from_user.id
    
    try:
        reminder_time = datetime.strptime(message.text, "%Y-%m-%d %H:%M")
        users_data[user_id]['reminders'].append({'time': reminder_time, 'amount': amount, 'message': reminder_message})
        bot.send_message(message.chat.id, f"ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ½Ğ° {reminder_time} Ğ¾ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğµ {amount}.")
        bot.send_message(message.chat.id, "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())
        
    except ValueError:
        bot.send_message(message.chat.id, "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ² ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ.")
        bot.register_next_step_handler(message, lambda msg: add_reminder(msg, amount, reminder_message))

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹
def view_reminders(message):
    user_id = message.from_user.id
    reminders = users_data[user_id].get('reminders', [])
    
    if reminders:
        response = "\n".join(f"{reminder['time']}: {reminder['message']} Ğ½Ğ° ÑÑƒĞ¼Ğ¼Ñƒ {reminder['amount']}" for reminder in reminders)
        bot.send_message(message.chat.id, f"Ğ’Ğ°ÑˆĞ¸ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ:\n{response}")
    else:
        bot.send_message(message.chat.id, "Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğ¹.")
    
    bot.send_message(message.chat.id, "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu_keyboard())

bot.polling(none_stop=True)